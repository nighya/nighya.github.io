webpackJsonp([2],{"1kS7":function(e,t){t.f=Object.getOwnPropertySymbols},NpIQ:function(e,t){t.f={}.propertyIsEnumerable},R4wc:function(e,t,a){var n=a("kM2E");n(n.S+n.F,"Object",{assign:a("To3L")})},To3L:function(e,t,a){"use strict";var n=a("+E39"),o=a("lktj"),s=a("1kS7"),r=a("NpIQ"),i=a("sB3e"),c=a("MU5D"),l=Object.assign;e.exports=!l||a("S82l")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var a=i(e),l=arguments.length,u=1,d=s.f,_=r.f;l>u;)for(var m,v=c(arguments[u++]),h=d?o(v).concat(d(v)):o(v),f=h.length,p=0;f>p;)m=h[p++],n&&!_.call(v,m)||(a[m]=v[m]);return a}:l},V3tA:function(e,t,a){a("R4wc"),e.exports=a("FeBl").Object.assign},woOf:function(e,t,a){e.exports={default:a("V3tA"),__esModule:!0}},zGow:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),o=a.n(n),s=a("Xxa5"),r=a.n(s),i=a("exGp"),c=a.n(i),l=a("GVVA"),u={data:function(){return{columnName:"date",isDescending:!0,showNoteData:{date:null},loading:!1,singleSelect:!1,sent_selected:[],received_selected:[],sent_headers:[{text:"받는사람",align:"start",sortable:!1,value:"to_nickname"},{text:"제목",value:"title"},{text:"날짜",value:"date"}],received_headers:[{text:"보낸사람",align:"start",sortable:!1,value:"from_nickname"},{text:"제목",value:"title"},{text:"날짜",value:"date"},{text:"조회수",value:"view_count"}],SentNoteStateData:this.$store.state.notestore.sent_note_state,ReceivedNoteStateData:this.$store.state.notestore.received_note_state,tab:"tab-1",to_user_uid:this.$route.params.user_uid,from_user_uid:this.$store.state.loginstore.userstate[0].user_uid,note_to_nickname:this.$route.params.nickname,note_from_nickname:this.$store.state.loginstore.userstate[0].nickname,note_title:"",note_textarea:"",note_from_gender:this.$store.state.loginstore.userstate[0].gender,rules:{rules_nickname:{require1:function(e){return!!e||"닉네임을 입력해 주세요."},require2:function(e){return!(e&&e.length>=30)||"닉네임은 30자 이상 입력할 수 없습니다."}},rules_title:{require1:function(e){return!!e||"제목을 입력해 주세요."},require2:function(e){return!(e&&e.length>=30)||"제목은 30자 이상 입력할 수 없습니다."}},rules_textarea:{require1:function(e){return!!e||"내용을 입력해 주세요."},require2:function(e){return!(e&&e.length>=1e3)||"내용은 1000자 이상 입력할 수 없습니다."}}}}},computed:{confirm_received_note:function(){this.loading=!0;var e={to_uid:this.$store.state.loginstore.userstate[0].user_uid,to_nickname:this.$store.state.loginstore.userstate[0].nickname};this.$store.dispatch("notestore/getreceivednote",e),this.loading=!1}},methods:{SendNote:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={to_uid:e.to_user_uid,from_uid:e.from_user_uid,to_nickname:e.note_to_nickname,from_nickname:e.note_from_nickname,title:e.note_title,message:e.note_textarea,from_gender:e.note_from_gender},!e.$refs.form.validate()){t.next=19;break}if(t.prev=3,a.to_nickname!=a.from_nickname){t.next=8;break}alert("자기자신에게는 보낼 수 없습니다."),t.next=14;break;case 8:return t.next=10,l.a.post("/note/sendnote",a,{withCredentials:!0});case 10:e.note_to_nickname="",e.note_title="",e.note_textarea="",e.changeTab();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),alert("쪽지보내기를 실패하였습니다.");case 19:case"end":return t.stop()}},t,e,[[3,16]])}))()},changeTab:function(){var e=this;return c()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSentNote();case 3:e.tab="tab-3",t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()},getSentNote:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,a={from_uid:e.$store.state.loginstore.userstate[0].user_uid,from_nickname:e.$store.state.loginstore.userstate[0].nickname},e.$store.dispatch("notestore/getsentnote",a),e.loading=!1;case 4:case"end":return t.stop()}},t,e)}))()},getReceivedNote:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,a={to_uid:e.$store.state.loginstore.userstate[0].user_uid,to_nickname:e.$store.state.loginstore.userstate[0].nickname},e.$store.dispatch("notestore/getreceivednote",a),e.loading=!1;case 4:case"end":return t.stop()}},t,e)}))()},deleteSentNoteDetail:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={from_uid:e.showNoteData.from_uid,id_num:e.showNoteData.id_num};try{e.$store.dispatch("notestore/deletesentnotedetail",a),e.showNoteData={date:null},e.tab="tab-3"}catch(e){e&&alert("쪽지 삭제에 실패하였습니다")}case 2:case"end":return t.stop()}},t,e)}))()},deleteSentNoteSelected:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],e.sent_selected.map(function(e){return a.push({id_num:e.id_num,from_uid:e.from_uid})});try{e.$store.dispatch("notestore/deletesentnoteselected",a)}catch(e){e&&alert("쪽지 삭제에 실패하였습니다")}case 3:case"end":return t.stop()}},t,e)}))()},deleteReceivedNoteDetail:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={to_uid:e.showNoteData.to_uid,id_num:e.showNoteData.id_num};try{e.$store.dispatch("notestore/deletereceivednotedetail",a),e.showNoteData={date:null},e.tab="tab-2"}catch(e){e&&alert("쪽지 삭제에 실패하였습니다")}case 2:case"end":return t.stop()}},t,e)}))()},deleteReceivedNoteSelected:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],e.received_selected.map(function(e){return a.push({id_num:e.id_num,to_uid:e.to_uid})});try{e.$store.dispatch("notestore/deletreceivednoteselected",a)}catch(e){e&&alert("쪽지 삭제에 실패하였습니다")}case 3:case"end":return t.stop()}},t,e)}))()},showNoteDetail:function(e){this.showNoteData=o()({},e);var t={id_num:e.id_num,to_uid:e.to_uid};if(this.showNoteData.to_nickname===this.$store.state.loginstore.userstate[0].nickname)try{this.$store.state.notestore.confirm_received_state-=1,this.$store.dispatch("notestore/confirmreceivednote",t)}catch(e){}this.tab="tab-4"},moveSentReplyNotetab:function(){this.$route.path!=="/note/"+this.showNoteData.to_nickname+"/"+this.showNoteData.to_uid?this.$router.push("/note/"+this.showNoteData.to_nickname+"/"+this.showNoteData.to_uid).catch(function(){return!0}):this.tab="tab-1"},moveReceivedReplyNotetab:function(){this.$route.path!=="/note/"+this.showNoteData.from_nickname+"/"+this.showNoteData.from_uid?this.$router.push("/note/"+this.showNoteData.from_nickname+"/"+this.showNoteData.from_uid).catch(function(){return!0}):this.tab="tab-1"}}},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[e._v("\n  "+e._s(e.confirm_received_note)+"\n  "),a("v-tabs",{attrs:{color:"deep-purple accent-1",left:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",{staticClass:"ml-5",attrs:{href:"#tab-1"}},[e._v("쪽지보내기")]),e._v(" "),a("v-tab",{attrs:{href:"#tab-2"},on:{click:e.getReceivedNote}},[e._v("받은쪽지\n      "),e.$store.state.notestore.confirm_received_state>0?a("v-badge",{attrs:{color:"pink",content:e.$store.state.notestore.confirm_received_state}}):e._e()],1),e._v(" "),a("v-tab",{attrs:{href:"#tab-3"},on:{click:e.getSentNote}},[e._v("보낸쪽지")]),e._v(" "),a("v-tab",{attrs:{href:"#tab-4"}},[e._v("쪽지보기")]),e._v(" "),a("v-tab-item",{staticClass:"ma-2",attrs:{value:"tab-1"}},[a("v-form",{ref:"form"},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{outlined:"",rules:[e.rules.rules_nickname.require1,e.rules.rules_nickname.require2],counter:"",maxlength:"30",hint:"",label:"받는사람(닉네임)"},model:{value:e.note_to_nickname,callback:function(t){e.note_to_nickname=t},expression:"note_to_nickname"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-text-field",{attrs:{outlined:"",rules:[e.rules.rules_title.require1,e.rules.rules_title.require2],counter:"",maxlength:"30",hint:"",label:"제목"},model:{value:e.note_title,callback:function(t){e.note_title=t},expression:"note_title"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{outlined:"",rules:[e.rules.rules_textarea.require1,e.rules.rules_textarea.require2],label:"내용",counter:"",maxlength:"1000"},model:{value:e.note_textarea,callback:function(t){e.note_textarea=t},expression:"note_textarea"}})],1)],1)],1)],1),e._v(" "),a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.SendNote}},[e._v("보내기")])],1)],1),e._v(" "),a("v-tab-item",{staticClass:"ma-2",attrs:{value:"tab-2"}},[a("v-icon",{staticClass:"ma-4",on:{click:e.deleteReceivedNoteSelected}},[e._v("mdi-trash-can-outline")]),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.received_headers,items:e.$store.state.notestore.received_note_state,"single-select":e.singleSelect,loading:e.loading,"sort-by":e.columnName,"sort-desc":e.isDescending,"items-per-page":5,"mobile-breakpoint":"0","loading-text":"Loading... Please wait","item-key":"date","show-select":""},on:{"update:sortBy":function(t){e.columnName=t},"update:sort-by":function(t){e.columnName=t},"update:sortDesc":function(t){e.isDescending=t},"update:sort-desc":function(t){e.isDescending=t},"click:row":e.showNoteDetail},model:{value:e.received_selected,callback:function(t){e.received_selected=t},expression:"received_selected"}})],1),e._v(" "),a("v-tab-item",{staticClass:"ma-2",attrs:{value:"tab-3"}},[a("v-icon",{staticClass:"ma-4",on:{click:e.deleteSentNoteSelected}},[e._v("mdi-trash-can-outline")]),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.sent_headers,items:e.$store.state.notestore.sent_note_state,"single-select":e.singleSelect,loading:e.loading,"sort-by":e.columnName,"sort-desc":e.isDescending,"items-per-page":5,"mobile-breakpoint":"0","loading-text":"Loading... Please wait","item-key":"date","show-select":""},on:{"update:sortBy":function(t){e.columnName=t},"update:sort-by":function(t){e.columnName=t},"update:sortDesc":function(t){e.isDescending=t},"update:sort-desc":function(t){e.isDescending=t},"click:row":e.showNoteDetail},model:{value:e.sent_selected,callback:function(t){e.sent_selected=t},expression:"sent_selected"}})],1),e._v(" "),a("v-tab-item",{staticClass:"ma-5",attrs:{value:"tab-4"}},[null!==e.showNoteData.date?a("div",[e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.from_nickname?a("v-card-title",[e._v("내가보낸쪽지")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname?a("v-card-title",[e._v("내가받은쪽지")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname?a("v-icon",{on:{click:e.moveReceivedReplyNotetab}},[e._v("mdi-email-outline")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname?a("v-icon",{staticClass:"ml-2",on:{click:e.deleteReceivedNoteDetail}},[e._v("mdi-trash-can-outline")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.from_nickname?a("v-icon",{on:{click:e.moveSentReplyNotetab}},[e._v("mdi-email-outline")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.from_nickname?a("v-icon",{staticClass:"ml-2",on:{click:e.deleteSentNoteDetail}},[e._v("mdi-trash-can-outline")]):e._e(),e._v(" "),a("v-divider"),e._v(" "),a("v-row",{staticClass:"mt-1 mb-1"},[a("v-col",[e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname&&"male"==e.showNoteData.from_gender?a("v-icon",{attrs:{color:"blue darken-3"}},[e._v("mdi-alpha-m-circle-outline")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname&&"female"==e.showNoteData.from_gender?a("v-icon",{attrs:{color:"pink"}},[e._v("mdi-alpha-w-circle-outline")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.to_nickname?a("span",[e._v("\n              "+e._s(e.showNoteData.from_nickname)+"\n            ")]):e._e(),e._v(" "),e.$store.state.loginstore.userstate[0].nickname==e.showNoteData.from_nickname?a("span",[e._v("\n              "+e._s(e.showNoteData.to_nickname)+"\n            ")]):e._e()],1),a("v-col",{attrs:{align:"end"}},[a("span",[e._v(e._s(e.showNoteData.date))])])],1),e._v(" "),a("v-divider"),e._v(" "),a("div",{staticClass:"mt-2 mb-1"},[e._v("제목")]),e._v(" "),a("div",{staticClass:"mb-2"},[e._v(e._s(e.showNoteData.title))]),e._v(" "),a("v-divider"),e._v(" "),a("div",{staticClass:"mt-2 mb-1"},[e._v("내용")]),e._v(" "),a("div",{staticClass:"mb-2"},[e._v(e._s(e.showNoteData.message))])],1):a("div",[e._v("쪽지가 선택되지 않았습니다.")])])],1)],1)};d._withStripped=!0;var _={render:d,staticRenderFns:[]},m=_;var v=a("VU/8")(u,m,!1,null,null,null);v.options.__file="src/components/Note.vue";t.default=v.exports}});
//# sourceMappingURL=2.d871362e17cf486acf71.js.map