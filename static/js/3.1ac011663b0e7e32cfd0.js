webpackJsonp([3],{"5zde":function(e,t,r){r("zQR9"),r("qyJz"),e.exports=r("FeBl").Array.from},Gu7T:function(e,t,r){"use strict";t.__esModule=!0;var a,n=r("c/Tr"),s=(a=n)&&a.__esModule?a:{default:a};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,s.default)(e)}},"c/Tr":function(e,t,r){e.exports={default:r("5zde"),__esModule:!0}},fBQ2:function(e,t,r){"use strict";var a=r("evD5"),n=r("X8DO");e.exports=function(e,t,r){t in e?a.f(e,t,n(0,r)):e[t]=r}},l0qd:function(e,t){},qyJz:function(e,t,r){"use strict";var a=r("+ZMJ"),n=r("kM2E"),s=r("sB3e"),i=r("msXi"),l=r("Mhyx"),o=r("QRG4"),c=r("fBQ2"),u=r("3fs2");n(n.S+n.F*!r("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,n,v,g=s(e),d="function"==typeof this?this:Array,f=arguments.length,_=f>1?arguments[1]:void 0,m=void 0!==_,p=0,h=u(g);if(m&&(_=a(_,f>2?arguments[2]:void 0,2)),void 0==h||d==Array&&l(h))for(r=new d(t=o(g.length));t>p;p++)c(r,p,m?_(g[p],p):g[p]);else for(v=h.call(g),r=new d;!(n=v.next()).done;p++)c(r,p,m?i(v,_,[n.value,p],!0):n.value);return r.length=p,r}})},x8qb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),s=r("exGp"),i=r.n(s),l=r("Gu7T"),o=r.n(l),c=r("GVVA"),u={name:"ContentUpload",data:function(){return{title:null,title_rules:[function(e){return!!e||"제목을 입력해 주세요."},function(e){return e&&e.length<=50||"최대 문자의 길이가 50자 이하로 입력하셔야 합니다."}],rules:[function(e){return!e||e.length<4||"사진은 최대 3개까지만 가능합니다."},function(e){return!e||e.length>1||"사진은 최소 2개이상 선택해 주세요."}],currentImage:null,previewImage:null,progress:0,message:"",imageInfos:[],dialog_success:!1,dialog_fail:!1,dialog_relogin:!1,loading:!1,buttonKey:1}},methods:{selectImage:function(e){e?(this.currentImage=[].concat(o()(e)),this.previewImage=this.currentImage.map(function(e){return URL.createObjectURL(e)}),this.progress=0,this.message=""):(this.currentImage=null,this.previewImage=null)},upload:function(){var e=this;return i()(n.a.mark(function t(){var r,a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=24;break}if(!(e.$store.state.loginstore.userstate[0].point<=0)){t.next=7;break}alert("게시물을 업로드 하시려면 포인트 2점이 필요합니다. 다른 게시물에 점수를 주면 포인트를 얻을 수 있습니다."),e.$router.go(),t.next=24;break;case 7:if(e.currentImage){t.next=14;break}if(!(0==e.buttonKey||e.buttonKey>1)){t.next=10;break}return t.abrupt("return",e.buttonKey=1);case 10:return e.message="이미지가 선택되지 않았습니다.",t.abrupt("return");case 14:if(!e.currentImage){t.next=24;break}for(r=new FormData,a=0;a<e.currentImage.length;a++)s=e.currentImage[a],r.append("image",s);return r.append("user_uid",e.$store.state.loginstore.userstate[0].user_uid),r.append("title",e.title),r.append("nickname",e.$store.state.loginstore.userstate[0].nickname),r.append("gender",e.$store.state.loginstore.userstate[0].gender),e.progress=0,t.next=24,c.a.post("/imageupload_multi",r,{withCredentials:!0}).then(e.loading=!0).then(function(t){e.loading=!1,e.dialog_success=!0,e.message="이미지 업로드 성공"}).catch(function(t){403==t.response.status?e.dialog_relogin=!0:405==t.response.status||400==t.response.status&&(alert("게시물을 업로드 하시려면 포인트 2점이 필요합니다. 다른 게시물에 점수를 주면 포인트를 얻을 수 있습니다."),e.$router.go()),e.$refs.imageRef.reset(),e.currentImage=[],e.previewImage=[],e.loading=!1,e.dialog_fail=!0,e.message="이미지 업로드 실패"});case 24:case"end":return t.stop()}},t,e)}))()},successDialog:function(){this.dialog_success=!1,this.$router.go()},failDialog:function(){this.buttonKey++,this.currentImage=null,this.previewImage=null,this.progress=0,this.dialog_fail=!1},relogin:function(){this.dialog_relogin=!1,this.$router.push("/login")}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pa-3"},[r("div",{staticClass:"ml-1"},[r("v-list-item-title",{staticClass:"text-h5"},[e._v("사진골라줘 사진올리기")]),e._v(" "),e._m(0)],1),e._v(" "),r("v-row",{staticClass:"mt-5",attrs:{"no-gutters":"",justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"10"}},[r("v-form",{ref:"form"},[r("v-text-field",{attrs:{id:"제목",label:"제목",name:"email","prepend-icon":"mdi-format-title",type:"text",counter:"",maxlength:"50",rules:e.title_rules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),r("v-file-input",{attrs:{chips:"","prepend-icon":"mdi-camera",counter:"","show-size":"",label:"Select Image",accept:"image/*","truncate-length":"12",multiple:"",rules:e.rules},on:{change:e.selectImage}})],1)],1),e._v(" "),r("v-col",{staticClass:"ma-5",attrs:{cols:"4",align:"center",justify:"center"}},[r("v-btn",{key:e.buttonKey,staticClass:"pa-5",attrs:{align:"center",justify:"center",color:"success",dark:"",small:"",loading:e.loading},on:{click:e.upload}},[e._v("\n        Upload\n        "),r("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-cloud-upload")])],1)],1)],1),e._v(" "),e.progress?r("div",[r("div",[r("v-progress-linear",{attrs:{color:"light-blue",height:"25",reactive:""},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}},[r("strong",[e._v(e._s(e.progress)+" %")])])],1)]):e._e(),e._v(" "),e.previewImage?r("div",e._l(e.previewImage,function(e){return r("div",{key:e},[r("img",{staticClass:"preview my-3",attrs:{src:e,alt:""}})])}),0):e._e(),e._v(" "),e.message?r("v-alert",{attrs:{border:"left",color:"grey",outlined:"",dense:""}},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),e._v(" "),e.imageInfos.length>0?r("v-card",{staticClass:"mx-auto"},[r("v-list",[r("v-subheader",[e._v("List of Images")]),e._v(" "),r("v-list-item-group",{attrs:{color:"primary"}},e._l(e.imageInfos,function(t,a){return r("v-list-item",{key:a},[r("a",{attrs:{href:t.url}},[e._v(e._s(t.name))])])}),1)],1)],1):e._e(),e._v(" "),r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialog_success,callback:function(t){e.dialog_success=t},expression:"dialog_success"}},[r("v-card",[r("v-card-title",[e._v("\n          이미지가 업로드 되었습니다.\n        ")]),e._v(" "),r("v-card-text",{staticClass:"mt-3"},[e._v("\n          게시물 확인은 닉네임으로 검색하거나 내정보에서 볼 수 있습니다.\n        ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.successDialog}},[e._v("\n            확인\n          ")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialog_fail,callback:function(t){e.dialog_fail=t},expression:"dialog_fail"}},[r("v-card",[r("v-card-title",[e._v("\n          이미지 업로드를 실패하였습니다. 이미지 1장당 크기가 5MB 초과하였거나\n          이미지 파일이 아닐 수 있습니다.\n        ")]),e._v(" "),r("v-card-text",[e._v("\n          이미지를 다시 선택하여 시도해 보세요.\n        ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.failDialog}},[e._v("\n            확인\n          ")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dialog_relogin,callback:function(t){e.dialog_relogin=t},expression:"dialog_relogin"}},[r("v-card",[r("v-card-title",{staticClass:"text-h7 grey lighten-2"},[e._v("\n          로그인 페이지 이동\n        ")]),e._v(" "),r("v-card-text",[e._v("\n          로그인 하지 않았거나 인증서 만료로 재로그인이 필요합니다.\n        ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:e.relogin}},[e._v("\n            확인\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticStyle:{color:"gray"}},[this._v("1.이미지크기는 1장당 5MB이하, 이미지갯수는 2개이상 및 3개까지만\n      가능합니다."),t("br"),this._v("2.사진골라줘 통계는 모두가 볼 수 있습니다."),t("br"),this._v("3.이미지\n      업로드시 2포인트 차감되며 각 게시물당 점수주기나 사진고르기로 1포인트씩\n      얻을 수 있습니다.")])}]};var g=r("VU/8")(u,v,!1,function(e){r("l0qd")},"data-v-4bc47743",null);t.default=g.exports}});
//# sourceMappingURL=3.1ac011663b0e7e32cfd0.js.map